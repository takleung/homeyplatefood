{{ define "main" }}
<article class="recipe-single">
    <div class="container">
        <div class="recipe-header">
            <h1 class="recipe-single-title">{{ .Title }}</h1>
            <div class="recipe-meta-bar">
                <time datetime="{{ .Date.Format "2006-01-02" }}" class="recipe-date">
                    {{ .Date.Format "January 2, 2006" }}
                </time>
            </div>
        </div>

        {{ with .Resources.GetMatch "*.{jpg,jpeg,png,gif,webp}" }}
        <div class="recipe-hero-image">
            <img src="{{ .Permalink }}" alt="{{ $.Title }}" loading="eager">
        </div>
        {{ end }}

        <div class="recipe-body">
            {{ .Content }}
        </div>

        <!-- Image Gallery -->
        {{ $images := .Resources.Match "*.{jpg,jpeg,png,gif,webp}" }}
        {{ if gt (len $images) 1 }}
        <div class="recipe-gallery">
            <h2>Gallery</h2>
            <div class="gallery-grid">
                {{ range $images }}
                    {{ if not .Params.cover }}
                    <div class="gallery-item">
                        <img src="{{ .Permalink }}" alt="{{ $.Title }}" loading="lazy">
                    </div>
                    {{ end }}
                {{ end }}
            </div>
        </div>
        {{ end }}

        <div class="recipe-navigation">
            {{ with .PrevInSection }}
            <a href="{{ .Permalink }}" class="nav-link nav-prev">
                <span class="nav-label">← Previous Recipe</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
            {{ end }}
            <a href="/" class="nav-link nav-home">
                <span class="nav-label">← Back to Gallery</span>
            </a>
            {{ with .NextInSection }}
            <a href="{{ .Permalink }}" class="nav-link nav-next">
                <span class="nav-label">Next Recipe →</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
            {{ end }}
        </div>
    </div>
</article>
{{ end }}
